<div id="ds-autocomplete" class="relative space-y-1" [ngClass]="className">
  <div
    class="flex justify-start flex-wrap gap-1 bg-level-4 rounded border border-neutral-50 p-2"
  >
    <ds-badge
      size="sm"
      pill="true"
      *ngFor="let val of values"
      [label]="val.label"
      icon="close"
      iconRight="true"
      (onClick)="onDeleteBadge($event, val)"
    ></ds-badge>

    <input
      #myInput
      class="text-sm font-bold flex-1 bg-transparent placeholder:text-sm placeholder:text-neutral-200 outline-none border-none focus:ring-0 p-0"
      [value]="value"
      (focus)="showDropdown = true"
      (input)="onInput($event)"
      (keydown.backspace)="onBackspace()"
      [placeholder]="placeholder"
      [attr.aria-label]="'Autocomplete input for ' + placeholder"
    />
  </div>

  <div
    *ngIf="showDropdown"
    class="absolute top-full left-0 w-full min-w-[300px] max-w-[500px] bg-white border border-gray-300 rounded shadow z-10"
  >
    <ul
      *ngIf="filteredItems.length"
      class="max-h-60 p-6 overflow-y-auto custom-scrollbar grid grid-cols-2 gap-2"
    >
      <li
        *ngFor="let item of filteredItems"
        class="px-4 pt-3 pb-2 rounded transition-all duration-300 ease-in-out flex items-center hover:bg-neutral-25 cursor-pointer gap-2"
        (click)="onSelectItem($event, item)"
      >
        <ds-checkbox
          [checked]="item.checked"
          [label]="item.label"
          variant="autocomplete"
          className="w-full"
        ></ds-checkbox>
      </li>
    </ul>

    <div
      *ngIf="!filteredItems.length"
      class="w-full min-h-32 bg-level-4 max-h-60 p-6 flex justify-center items-center overflow-y-auto custom-scrollbar"
    >
      <h3 class="text-[1rem]/[1.5rem] font-bold text-neutral-800">
        No results found
      </h3>
    </div>
  </div>
</div>
