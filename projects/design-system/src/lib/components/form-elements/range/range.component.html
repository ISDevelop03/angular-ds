<div id="ds-range" [ngClass]="theme[variant].container">
  <!-- single-thumb slider -->
  <ng-container *ngIf="rangeType === 'single'">
    <div
      #singleTrack
      class="relative w-full h-6 select-none"
      (pointerdown)="onSinglePointerDown($event)"
    >
      <!-- full track -->
      <div [ngClass]="theme[variant].track" class="absolute inset-0"></div>

      <!-- filled portion -->
      <div
        [ngClass]="theme[variant].range"
        class="absolute"
        [ngStyle]="{ 'width.%': percent }"
      ></div>

      <!-- custom thumb -->
      <div
        [ngClass]="[theme[variant].thumb, value <= 0 ? 'ml-0' : '-ml-6']"
        class="group absolute -mt-2"
        [ngStyle]="{ 'left.%': percent }"
      >
        <div
          class="group-hover:opacity-100 opacity-0 font-medium transition-all duration-300 group-hover:translate-y-0 translate-y-1.5 ease-in-out pointer-events-none inline-flex justify-center items-center text-[0.875rem]/[1.25rem] absolute bottom-8 left-1/2 -translate-x-1/2 w-fit min-w-[42px] h-[34px] dark:bg-black bg-white rounded-lg shadow-lg text-neutral-800 after:absolute after:content-[''] after:w-0 after:h-0 after:border-[6px] after:border-solid after:border-transparent dark:after:border-t-black after:border-t-white after:top-full after:left-1/2 after:-translate-x-1/2 text-center"
        >
          <span class="px-1">
            {{ value }} {{ unit }}
          </span>
        </div>
      </div>
    </div>
  </ng-container>

  <!-- … your two-thumb markup stays as we last wrote it … -->

  <!-- two-thumb (min/max) slider -->
  <ng-container *ngIf="rangeType === 'range'">
    <div
      #track
      class="relative w-full h-6 select-none"
      (pointerdown)="onRangePointerDown($event)"
    >
      <!-- full track -->
      <div [ngClass]="theme[variant].track" class="absolute inset-0"></div>
      <!-- filled range between thumbs -->
      <div
        [ngClass]="theme[variant].range"
        class="absolute"
        [ngStyle]="{
          left: percentRange.min + '%',
          width: percentRange.max - percentRange.min + '%'
        }"
      ></div>

      <!-- thumbs -->
      <div
        [ngClass]="[theme[variant].thumb]"
        class="absolute -mt-2 -mr-6 group"
        [ngStyle]="{ 'left.%': percentRange.min }"
      >
        <div
          class="group-hover:opacity-100 transition-all duration-300 group-hover:translate-y-0 translate-y-1.5 ease-in-out pointer-events-none inline-flex justify-center items-center text-[0.875rem]/[1.25rem] absolute bottom-8 left-1/2 -translate-x-1/2 w-fit min-w-[42px] h-[34px] dark:bg-black bg-white rounded-lg shadow-lg font-medium text-neutral-800 after:absolute after:content-[''] after:w-0 after:h-0 after:border-[6px] after:border-solid after:border-transparent dark:after:border-t-black after:border-t-white after:top-full after:left-1/2 after:-translate-x-1/2 text-center"
        >
          <span class="px-1">
            {{ values[0] }} {{ unit }}
          </span>
        </div>
      </div>
      <div
        [ngClass]="[theme[variant].thumb]"
        class="group absolute -mt-2 -ml-6"
        [ngStyle]="{ 'left.%': percentRange.max }"
      >
        <div
          class="group-hover:opacity-100 font-medium transition-all duration-300 group-hover:translate-y-0 translate-y-1.5 ease-in-out pointer-events-none inline-flex justify-center items-center text-[0.875rem]/[1.25rem] absolute bottom-8 left-1/2 -translate-x-1/2 w-fit min-w-[42px] h-[34px] bg-white rounded-lg shadow-lg text-neutral-800 after:absolute after:content-[''] after:w-0 after:h-0 after:border-[6px] after:border-solid after:border-transparent after:border-t-white after:top-full after:left-1/2 after:-translate-x-1/2 text-center"
        >
          <span class="px-1">
            {{ values[1] }} {{ unit }}
          </span>
        </div>
      </div>
    </div>
  </ng-container>
</div>
